
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Create Your First App Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-theme-api/theme-api.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="arch/redux_single_route_app.html" />
    
    
    <link rel="prev" href="SETUP.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">Overview</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="COLLAR.md">
            
                <span>
            
                    
                    Collar.js In 5 minutes
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Get Started</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="SETUP.html">
            
                <a href="SETUP.html">
            
                    
                    Setup Environment
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="2.2" data-path="FIRST_APP.html">
            
                <a href="FIRST_APP.html">
            
                    
                    Create Your First App
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Predefined architectures</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="arch/redux_single_route_app.html">
            
                <a href="arch/redux_single_route_app.html">
            
                    
                    Redux Single Route App
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="arch/redux_multi_route_app.html">
            
                <a href="arch/redux_multi_route_app.html">
            
                    
                    Redux Multiple Route App
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">API Document</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="api/common.html">
            
                <a href="api/common.html">
            
                    
                    Common
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="api/redux_single_route_app.html">
            
                <a href="api/redux_single_route_app.html">
            
                    
                    Redux Single Route App
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="api/redux_multi_route_app.html">
            
                <a href="api/redux_multi_route_app.html">
            
                    
                    Redux Multiple Route App
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Build Your Own Architecture</li>
        
        
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Create Your First App</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="build-your-first-application">Build Your First Application</h1>
<p>In this tutorial, we will build a simple counter application. It is a single route redux application. A predefined architecture (&quot;redux-single-route-app&quot;) can be used to build your application with this architecture:</p>
<p><em>index.js</em></p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> Collux <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;collux&apos;</span>;

<span class="hljs-comment">// create a singe route redux application</span>
<span class="hljs-keyword">var</span> app = Collux.createApp(<span class="hljs-string">&apos;redux-single-route-app&apos;</span>, {});

<span class="hljs-comment">// run the application</span>
app.run();
</code></pre>
<p>Now you have a basic redux single route app. Let&apos;s check how it looks like with collar dev tool.</p>
<h3 id="check-the-architecture-with-collar-dev-tool">Check the architecture with collar dev tool</h3>
<p>Add the following code at the beginning of <em>index.js</em></p>
<pre><code class="lang-javascript"><span class="hljs-keyword">import</span> Collux <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;collux&apos;</span>;
<span class="hljs-comment">// add the following two lines</span>
<span class="hljs-keyword">import</span> DevToolAddon <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;collar.js-dev-client&apos;</span>;
Collux.use(<span class="hljs-keyword">new</span> DevToolAddon());
</code></pre>
<p>Now run collar dev server</p>
<pre><code>node node_modules/collar-dev-server/bin/collar-dev-server
</code></pre><p>or directly run it if you installed <em>collar-dev-server</em> globally</p>
<pre><code>collar-dev-server
</code></pre><p>Open collar dev tool in browser <a href="http://localhost:7500/?perspective=arch&amp;view=hierarchy.td" target="_blank">http://localhost:7500/?perspective=arch&amp;view=hierarchy.td</a></p>
<p>Next, run your application</p>
<pre><code>npm start
</code></pre><p>Check dev tool you will see the following diagram:</p>
<p><img src="assets/redux-single-route-app-arch-1.png" alt="redux single route app arch"></p>
<p>Your application is consist of 3 components: store, view, and system. Store handles <em>Actions</em> and manages the state of your application. It pushes new state to the view. The view can emit actions to change the application state. System component send system level actions to the store.</p>
<p>Right click on the nodes in the diagram, and expand them from the popup menu, you can get the following detail diagram, which shows the data flow of your application:</p>
<p><img src="assets/redux-single-route-app-arch-2.png" alt="redux single route app detail"></p>
<h3 id="setup-the-application">Setup the application</h3>
<p>The code above just helps us build a redux single route architecture. We need to config it to make it work. Let&apos;s first create a UI component to show the counter:</p>
<pre><code class="lang-javascript"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CounterView</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">React</span>.<span class="hljs-title">Component</span> </span>{
  <span class="hljs-keyword">constructor</span>(props) {
    <span class="hljs-keyword">super</span>(props);
    <span class="hljs-keyword">this</span>.state = {};
  }

  onIncrement() {
    <span class="hljs-keyword">this</span>.props.sensor.send({
      actionType: <span class="hljs-string">&apos;INCREMENT&apos;</span>
    })
  }

  onDecrement() {
    <span class="hljs-keyword">this</span>.props.sensor.send({
      actionType: <span class="hljs-string">&apos;DECREMENT&apos;</span>
    })
  }

  render() {
    <span class="hljs-keyword">return</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>{this.state.value}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.onIncrement.bind(this)}</span>&gt;</span>+<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{this.onDecrement.bind(this)}</span>&gt;</span>-<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
  }
}
</code></pre>
<p>And add the following options in <code>createApp()</code> function call, to tell our application what is the initial state (by specifying <code>initState</code>), how to render our view (by specifying <code>render</code>), and how to update the view (by specifying <code>updateState</code>).</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">let</span> counterView = <span class="hljs-literal">null</span>;
<span class="hljs-keyword">var</span> app = Collux.createApp(<span class="hljs-string">&apos;redux-single-route-app&apos;</span>, {
  initState: () =&gt; {  <span class="hljs-comment">//</span>
    <span class="hljs-keyword">return</span> {value: <span class="hljs-number">1</span>};
  },
  render: () =&gt; {
    counterView = ReactDOM.render(
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">CounterView</span> <span class="hljs-attr">sensor</span>=<span class="hljs-string">{app.getViewSensor()}</span>/&gt;</span>,
      document.getElementById(&apos;counter&apos;)
    )
  },
  updateState: (state) =&gt; {
    counterView.setState(state);
  }
});
</span></code></pre>
<h3 id="add-reducer">Add reducer</h3>
<p>Now it is time to add actions to our counter. Use application&apos;s <code>reduce</code> method to add two reducers to handle &apos;INCREMENT&apos; and &apos;DECREMENT&apos; actions.</p>
<pre><code class="lang-javascript">app.reduce(<span class="hljs-string">&apos;INCREMENT&apos;</span>, (prevState, action) =&gt; {
  <span class="hljs-keyword">return</span> {value: prevState.value + <span class="hljs-number">1</span>};
});

app.reduce(<span class="hljs-string">&apos;DECREMENT&apos;</span>, (prevState, action) =&gt; {
  <span class="hljs-keyword">return</span> {value: prevState.value - <span class="hljs-number">1</span>};
});
</code></pre>
<p>Well done! Your just made your first application, Now run your application again (If you use create-react-app, your app will refresh automatically when you save the file) and check collar dev tool. You will see your application looks like the following diagram:</p>
<p><img src="assets/redux-single-route-app-arch-3.png" alt="redux single route app complete"></p>
<p>You can play with your app and collar dev tool to understand how data flows.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            

        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Create Your First App","level":"2.2","depth":1,"next":{"title":"Redux Single Route App","level":"3.1","depth":1,"path":"arch/redux_single_route_app.md","ref":"arch/redux_single_route_app.md","articles":[]},"previous":{"title":"Setup Environment","level":"2.1","depth":1,"path":"SETUP.md","ref":"SETUP.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["theme-api","livereload"],"pluginsConfig":{"theme-api":{"languages":[{"lang":"js","name":"JavaScript","default":true}],"split":true,"theme":"light"},"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"FIRST_APP.md","mtime":"2016-12-28T11:00:45.417Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2016-12-28T09:20:23.146Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-theme-api/theme-api.js"></script>
        
    

    </body>
</html>

